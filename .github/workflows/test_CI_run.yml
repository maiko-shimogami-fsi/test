name: form-example 
on:
 #schedule:
 #   - cron: "0 20 * * *"
 workflow_dispatch:
    inputs:
      input_mod:
        description: 'Please enter the SHA-1 or branch name to UnitTest.'
        required: false
      input_compo:
        description: 'Please enter the compo name to UnitTest.'
        required: false
 
jobs:
    check-bats-version1:
      runs-on: windows-latest
      outputs:
       datetime:     ${{ steps.set_datetime.outputs.datetime}}
      
      steps:
      #環境を設定する
        - name: create text
          uses: actions/checkout@v3
        - run: |
             echo "aaa"
             
      #チェック確認
        - name: Set DATETIME
          id: set_datetime
          run: |
            $datetime = Get-Date -Format "yyyyMMddHHmm"
            echo "datetime=$datetime"
            echo "datetime=$datetime" | Out-File -Append -FilePath $env:GITHUB_OUTPUT
            
    check-bats-version2:
      runs-on: windows-latest
      needs: [ check-bats-version1 ]
      
      steps:
      #チェック確認
        - name: check2
          run: |
             $newFileName = "${{ needs.check-bats-version1.outputs.datetime }}" + ".csv"
             echo "newFileName=$newFileName"

        - name: check3
          run: |
             $NODE = "Lcd"
             $JsonFilePath = "unittest_setting.json"
             pwd
             ls -al
             chmod 777 unittest_setting.json
             $json = Get-Content $JsonFilePath | ConvertFrom-Json
             $core = ($json | where NodeName -eq $NODE).core_partition
             echo "CORE=$core"
